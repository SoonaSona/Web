<div class="container-fluid px-4 py-4">
    <div class="d-flex justify-content-between mb-4 align-items-center">
        <h3 class="fw-bold mb-0 text-primary">
            <i class="bi bi-clipboard-pulse"></i> Nurse Station
        </h3>
        <div class="d-flex">
            <input id="search" class="form-control" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ HN ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠..." style="width: 250px;">
        </div>
    </div>

    <div class="card shadow-sm border-0">
        <div class="card-header bg-white py-3">
            <h5 class="mb-0 text-primary"><i class="bi bi-people"></i> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô (IPD)</h5>
            <small class="text-muted">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</small>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th class="py-3 ps-3">‡πÄ‡∏ï‡∏µ‡∏¢‡∏á</th>
                            <th>HN</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                            <th>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏Ç‡πâ</th>
                            <th>Dx</th>
                            <th>Vitals ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th>
                            <th class="text-end pe-3">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <% if (patients.length === 0) { %>
                            <tr><td colspan="7" class="text-center py-4 text-muted">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà Admit ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</td></tr>
                        <% } else { %>
                            <% patients.forEach(function(p) { %>
                                <tr style="cursor: pointer;" onclick="openPatientData('<%= p.hn %>')">
                                    <td class="ps-3"><span class="badge bg-info text-dark"><%= p.bed %></span></td>
                                    <td><%= p.hn %></td>
                                    <td class="fw-bold text-primary"><%= p.name %></td>
                                    <td><%= p.doctor %></td>
                                    <td><span class="badge bg-warning text-dark"><%= p.dx %></span></td>
                                    <td class="small text-muted"><%= p.vitals %></td>
                                    <td class="text-end pe-3">
                                        <button class="btn btn-sm btn-outline-primary rounded-pill">
                                            <i class="bi bi-eye"></i> ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                        </button>
                                    </td>
                                </tr>
                            <% }); %>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="mainModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <div>
                    <h5 class="modal-title fw-bold" id="modalTitle">‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ</h5>
                    <small id="modalSubtitle" class="text-white-50">HN: ...</small>
                </div>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body p-0">
                <ul class="nav nav-tabs nav-justified" id="patientTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="tab-profile-btn" data-bs-toggle="tab" data-bs-target="#tab-profile" type="button"><i class="bi bi-person-circle"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-orders-btn" data-bs-toggle="tab" data-bs-target="#tab-orders" type="button"><i class="bi bi-prescription2"></i> ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-notes-btn" data-bs-toggle="tab" data-bs-target="#tab-notes" type="button"><i class="bi bi-journal-text"></i> Nurse Note</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-meds-btn" data-bs-toggle="tab" data-bs-target="#tab-meds" type="button"><i class="bi bi-capsule"></i> Medication</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-labs-btn" data-bs-toggle="tab" data-bs-target="#tab-labs" type="button"><i class="bi bi-eyedropper"></i> ‡∏ú‡∏• Lab</button>
                    </li>
                </ul>

                <div class="tab-content p-4 bg-light" id="patientTabsContent" style="min-height: 400px;">
                    <div class="tab-pane fade show active" id="tab-profile" role="tabpanel"></div>
                    <div class="tab-pane fade" id="tab-orders" role="tabpanel"></div>
                    <div class="tab-pane fade" id="tab-notes" role="tabpanel"></div>
                    <div class="tab-pane fade" id="tab-meds" role="tabpanel"></div>
                    <div class="tab-pane fade" id="tab-labs" role="tabpanel"></div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addNoteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/main/save-nurse-note" method="POST">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title"><i class="bi bi-pencil-square"></i> ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="hn" id="noteHn">
                    
                    <div class="mb-3">
                        <label>‡πÄ‡∏ß‡∏•‡∏≤</label>
                        <input type="time" name="note_time" class="form-control" required value="<%= new Date().toTimeString().slice(0,5) %>">
                    </div>
                    <div class="mb-3">
                        <label>Focus (‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)</label>
                        <input type="text" name="focus" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á, ‡πÑ‡∏Ç‡πâ‡∏Ç‡∏∂‡πâ‡∏ô, ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà" required>
                    </div>
                    <div class="mb-3">
                        <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (SOAP / Narrative)</label>
                        <textarea name="note_text" class="form-control" rows="4" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="editVitalsModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/main/update-vitals" method="POST">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title"><i class="bi bi-gear-fill"></i> ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="hn" id="vitalsHn">
                    <input type="hidden" name="an" id="vitalsAn"> 
                    <div class="row">
                        <div class="col-6 mb-3">
                            <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg)</label>
                            <input type="number" step="0.01" name="weight" id="inputWeight" class="form-control">
                        </div>
                        <div class="col-6 mb-3">
                            <label>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (cm)</label>
                            <input type="number" step="0.01" name="height" id="inputHeight" class="form-control">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label>Vital Signs ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (Text)</label>
                        <input type="text" name="latest_vitals" id="inputVitals" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô BP:120/80 P:80">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-warning">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // 1. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Server
    const patientsDB = <%- JSON.stringify(patients) %>;
    
    // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Object ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ HN ‡∏á‡πà‡∏≤‡∏¢‡πÜ
    const mockDB = patientsDB.reduce((acc, p) => {
        acc[p.hn] = p;
        return acc;
    }, {});

    let mainModal;
    document.addEventListener('DOMContentLoaded', function() {
        mainModal = new bootstrap.Modal(document.getElementById("mainModal"));
    });

    // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏™‡πà‡∏ó‡∏∏‡∏Å Tab
    function openPatientData(hn) {
        const data = mockDB[hn];
        if (!data) return alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢");

        // Set ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Modal
        document.getElementById('modalTitle').innerText = data.name;
        document.getElementById('modalSubtitle').innerText = `HN: ${hn} | AN: ${data.an} | ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á: ${data.bed}`;

        // --- Tab 1: Profile ---
        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ document ‡πÅ‡∏ó‡∏ô ddocument ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏° onclick
        document.getElementById('tab-profile').innerHTML = `
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="text-primary">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£ Admit</h5>
                        <button class="btn btn-sm btn-outline-warning" 
                            onclick="openEditVitals('${data.hn}', '${data.an}', '${data.rawWeight || ''}', '${data.rawHeight || ''}', '${data.vitals || ''}')">
                            <i class="bi bi-pencil"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Vitals
                        </button>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏Ç‡πâ:</strong> ${data.doctor}</p>
                            <p><strong>Admit:</strong> ${data.admitDate}</p>
                            <p><strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> ${data.age || '-'} ‡∏õ‡∏µ</p>
                        </div>
                        <div class="col-md-6">
                            <div class="alert alert-info py-2">
                                <strong>Vital Signs:</strong> ${data.vitals}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;

        // --- Tab 2: Orders ---
        document.getElementById('tab-orders').innerHTML = `
            <h5 class="text-primary mb-3">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå (Doctor's Order)</h5>
            <div class="bg-white rounded shadow-sm p-3">
                <table class="table table-striped mb-0">
                    <thead class="table-primary">
                        <tr><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th><th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr>
                    </thead>
                    <tbody>
                        ${data.orders && data.orders.length > 0 ? data.orders.map(o => `
                            <tr>
                                <td>${o.date}</td>
                                <td><span class="badge ${o.type === 'Continue' ? 'bg-warning text-dark' : 'bg-success'}">${o.type}</span></td>
                                <td>${o.item}</td>
                                <td><i class="bi bi-check-circle-fill text-success"></i> ${o.status}</td>
                            </tr>
                        `).join('') : '<tr><td colspan="4" class="text-center text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</td></tr>'}
                    </tbody>
                </table>
            </div>
        `;

        // --- Tab 3: Notes ---
        document.getElementById('tab-notes').innerHTML = `
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary mb-0">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h5>
                <button class="btn btn-sm btn-success" onclick="openAddNote('${data.hn}')">
                    <i class="bi bi-plus-lg"></i> ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Note ‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
            <div class="bg-white rounded shadow-sm p-3">
                <table class="table table-hover mb-0">
                    <thead class="table-info">
                        <tr><th style="width:15%">‡πÄ‡∏ß‡∏•‡∏≤</th><th style="width:20%">Focus</th><th>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (SOAP)</th><th>‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th></tr>
                    </thead>
                    <tbody>
                        ${data.nurseNotes && data.nurseNotes.length > 0 ? data.nurseNotes.map(n => `
                            <tr>
                                <td>${n.time}</td>
                                <td class="fw-bold text-primary">${n.focus}</td>
                                <td>${n.text}</td>
                                <td class="text-muted small">${n.recorder}</td>
                            </tr>
                        `).join('') : '<tr><td colspan="4" class="text-center text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</td></tr>'}
                    </tbody>
                </table>
            </div>
        `;

        // --- Tab 4: Meds ---
        document.getElementById('tab-meds').innerHTML = `
            <h5 class="text-primary mb-3">‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏¢‡∏≤ (Medication Administration Record)</h5>
            <div class="bg-white rounded shadow-sm p-3">
                <table class="table table-bordered mb-0 align-middle">
                    <thead class="bg-light">
                        <tr><th>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</th><th>‡∏Ç‡∏ô‡∏≤‡∏î/‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ</th><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th></tr>
                    </thead>
                    <tbody>
                        ${data.medication && data.medication.length > 0 ? data.medication.map(m => `
                            <tr>
                                <td class="fw-bold">${m.name}</td>
                                <td>${m.dose} <br><small class="text-muted">${m.route}</small></td>
                                <td>${m.time}</td>
                                <td><span class="badge bg-secondary">${m.last_given}</span></td>
                            </tr>
                        `).join('') : '<tr><td colspan="4" class="text-center text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</td></tr>'}
                    </tbody>
                </table>
            </div>
        `;

        // --- Tab 5: Labs ---
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ flag ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ error ‡∏Å‡∏£‡∏ì‡∏µ flag ‡πÄ‡∏õ‡πá‡∏ô null
        document.getElementById('tab-labs').innerHTML = `
            <h5 class="text-primary mb-3">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏ó‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Lab Results)</h5>
            ${data.lab && data.lab.length > 0 ? data.lab.map(l => `
                <div class="card mb-3 border-0 shadow-sm">
                    <div class="card-header bg-white fw-bold border-bottom">${l.name}</div>
                    <div class="card-body p-0">
                        <table class="table mb-0">
                            <thead><tr><th>Test</th><th>Result</th><th>Unit</th><th>Flag</th></tr></thead>
                            <tbody>
                                ${l.items.map(i => `
                                    <tr class="${i.flag && (i.flag.includes('(L)') || i.flag.includes('(H)')) ? 'table-danger' : ''}">
                                        <td>${i.test}</td>
                                        <td class="fw-bold">${i.result}</td>
                                        <td>${i.unit}</td>
                                        <td>${i.flag || '-'}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `).join('') : '<p class="text-center text-muted mt-4">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏• Lab</p>'}
        `;

        // 3. ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á Tab ‡πÅ‡∏£‡∏Å‡πÄ‡∏™‡∏°‡∏≠
        const firstTabEl = document.querySelector('#patientTabs button[data-bs-target="#tab-profile"]');
        const firstTab = new bootstrap.Tab(firstTabEl);
        firstTab.show();

        // 4. ‡πÅ‡∏™‡∏î‡∏á Modal
        mainModal.show();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    document.getElementById("search").addEventListener("keyup", function() {
        let v = this.value.toLowerCase();
        document.querySelectorAll("#tableBody tr").forEach(row => {
            row.style.display = row.innerText.toLowerCase().includes(v) ? "" : "none";
        });
    });

    // ‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Note
    function openAddNote(hn) {
        document.getElementById('noteHn').value = hn; 
        new bootstrap.Modal(document.getElementById('addNoteModal')).show();
    }

    // ‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Vitals
    function openEditVitals(hn, an, w, h, v) {
        document.getElementById('vitalsHn').value = hn;
        document.getElementById('vitalsAn').value = an;
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏™‡πà (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô null ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á)
        document.getElementById('inputWeight').value = (w && w !== 'null' && w !== 'undefined') ? w : '';
        document.getElementById('inputHeight').value = (h && h !== 'null' && h !== 'undefined') ? h : '';
        document.getElementById('inputVitals').value = (v && v !== 'null' && v !== 'undefined') ? v : '';

        new bootstrap.Modal(document.getElementById('editVitalsModal')).show();
    }
</script>